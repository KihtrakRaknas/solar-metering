(this["webpackJsonpsolar-metering"]=this["webpackJsonpsolar-metering"]||[]).push([[0],{116:function(e,t){},118:function(e,t){},173:function(e,t,a){"use strict";a.r(t);var n=a(5),c=a(2),r=a.n(c),i=a(38),l=a.n(i),s=(a(91),a(92),a(93),a(94),a(25)),o=(a(95),a(85)),d=a(24),j=a(42);function u(e,t){var a,n=Object(j.a)(Object.keys(e[0]).filter((function(e){return e.includes("time")})));try{var c=function(){var t=a.value;e.forEach((function(e){e[t]=new Date(e[t]).toUTCString()}))};for(n.s();!(a=n.n()).done;)c()}catch(i){n.e(i)}finally{n.f()}var r=Object.keys(e[0]).filter((function(e){return!t||t.includes(e)})).map((function(e){return{label:e.split("_").join(" ").replace("Vb max daily","Battery Voltage Max (Daily)").replace("Vb min daily","Battery Voltage Min (Daily)").replace("Whc daily","Battery Wh (Daily)").replace("fault daily","Fault Daily").replace("alarm daily","Alarm Daily"),field:e}}));return{tableData:e,key:r}}function b(e){var t=u(e.data,e.fields),a=t.key,c=t.tableData;return console.log(e.reverse),Object(n.jsx)(d.c,{striped:!0,borderless:!0,small:!0,hover:!0,sortable:!1,data:{columns:a,rows:e.reverse?c:Object(o.a)(c).reverse()}})}function h(){return Object(n.jsx)("h1",{children:"No data found!"})}var f=a(83),O=a.n(f);function x(e){var t,a=u(e.data).tableData,r=function(){var e=Object(c.useState)({width:void 0,height:void 0}),t=Object(s.a)(e,2),a=t[0],n=t[1];return Object(c.useEffect)((function(){function e(){n({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),a}(),i=[],l=Object(j.a)(e.categories);try{for(l.s();!(t=l.n()).done;){var o=t.value,d=p(o,a),b=d.x,h=d.y;i.push({x:b,y:h,name:o,type:"scatter",mode:"lines+markers",marker:{color:o.includes("max")?"red":"black"}})}}catch(f){l.e(f)}finally{l.f()}return Object(n.jsx)(O.a,{data:i,layout:{width:r.width-20,height:500,title:e.title,xaxis:{title:"Time"},yaxis:{title:e.yTitle}},config:{responsive:!0}})}function p(e,t){return{x:t.map((function(e){return new Date(e["time (UTC)"])})),y:t.map((function(t){return Number(t[e.split(" ").join("_")])}))}}function m(e){var t=e.data;return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)("br",{}),Object(n.jsx)("div",{className:"title_component",children:Object(n.jsx)("header",{className:"App-header",children:Object(n.jsx)("h1",{className:"App-title",style:{textAlign:"center"},children:"Real-Time Solar Output"})})}),t.length>0?Object(n.jsx)(x,{data:t,categories:["Vb min daily","Vb max daily"],title:"Vb Over Time",yTitle:"Vb Value (unit goes here)"}):Object(n.jsx)(h,{}),t.length>0?Object(n.jsx)(x,{data:t,categories:["Whc daily"],title:"Whc Value",yTitle:"Whc Value (unit goes here)"}):Object(n.jsx)(h,{}),Object(n.jsx)("div",{style:{padding:15,overflowX:"auto"},children:t.length>0?Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(b,{data:t,fields:["time (UTC)","Vb_max_daily","Vb_min_daily","Whc_daily","alarm_daily"]})}):Object(n.jsx)(h,{})})]})}function g(e){var t=e.data,a=Object(c.useState)(!1),r=Object(s.a)(a,2),i=r[0],l=r[1];return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)("br",{}),Object(n.jsx)("div",{className:"title_component",children:Object(n.jsx)("header",{className:"App-header",children:Object(n.jsx)("h1",{className:"App-title",style:{textAlign:"center"},children:"Complete Solar Data from MSView"})})}),Object(n.jsx)("br",{}),Object(n.jsxs)("div",{style:{padding:15,overflowX:"auto"},children:[t.length>0?Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(b,{data:t,reverse:i})}):Object(n.jsx)(h,{}),Object(n.jsx)("div",{style:{textAlign:"center"},children:Object(n.jsx)(d.b,{gradient:i?"peach":"purple",onClick:function(){return l(!i)},children:"Reverse Order"})})]})]})}var y=a(84);function v(e){Object(y.a)(e);var t=Object(c.useState)(null),a=Object(s.a)(t,2),r=a[0],i=a[1],l=function(){fetch("http://localhost:4001/last-write").then((function(e){return e.json()})).then((function(e){console.log("Last Write: ".concat(e.lastWrite)),i(e.lastWrite)})).catch((function(e){console.log(e)}))};Object(c.useEffect)((function(){l(),setInterval(l,3e5)}),[!0]);var o=function(e){var t=(new Date-e)/36e5;return{hours:Math.floor(t%24),days:Math.floor(t/24),recent:t<1}}(r);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("nav",{children:Object(n.jsxs)(d.g,{color:"gray",expand:"md",fixed:"top",scrolling:!0,style:{backgroundColor:"white"},children:[Object(n.jsx)(d.h,{children:Object(n.jsx)("strong",{className:"black-text",children:"Solor Metering"})}),Object(n.jsx)(d.f,{to:"/home",children:"Graphs"}),Object(n.jsx)(d.f,{to:"/full-table",children:"Full Table"}),Object(n.jsx)("div",{className:"ml-auto",children:null!=r?-1==r?"No uploads have happened yet":o.recent?"An upload recently took place":"Last upload was ".concat(o.hours," hours and ").concat(o.days," days ago"):"View Only"})]})}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{})]})}var w=a(33),V=a(13),A=a(54),D=a(171);a(172);try{A.a.initializeApp({apiKey:"AIzaSyD2K0qINs7uoG6-2whLT8Wgab_AvAhVEzI",authDomain:"sierra-leone-cec24.firebaseapp.com",projectId:"sierra-leone-cec24",storageBucket:"sierra-leone-cec24.appspot.com",messagingSenderId:"458713135578",appId:"1:458713135578:web:d5a3e153fa883269ace8e3"})}catch(S){}A.a.firestore();var k=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),a=t[0],r=t[1],i=function(){console.log("fetching!"),D("http://localhost:4001/logfile").then((function(e){return e.json()})).then((function(e){console.log(e),r(e)})).catch((function(e){console.log(e)}))};return Object(c.useEffect)((function(){i(),setInterval(i,3e4)}),[!0]),Object(n.jsxs)(w.a,{basename:"/solar-metering",children:[Object(n.jsx)(v,{}),Object(n.jsxs)(V.c,{children:[Object(n.jsx)(V.a,{path:"/full-table",children:Object(n.jsx)(g,{data:a})}),Object(n.jsx)(V.a,{path:"/",children:Object(n.jsx)(m,{data:a})})]})]})},N=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,177)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),r(e),i(e)}))};l.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(k,{})}),document.getElementById("root")),N()},91:function(e,t,a){}},[[173,1,2]]]);
//# sourceMappingURL=main.0ffc653f.chunk.js.map