(this["webpackJsonpsolar-metering"]=this["webpackJsonpsolar-metering"]||[]).push([[0],{125:function(e,t,a){"use strict";a.r(t);var n=a(5),c=a(2),r=a.n(c),i=a(34),s=a.n(i),l=(a(75),a(76),a(77),a(78),a(57)),o=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,129)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),r(e),i(e)}))};s.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(l.a,{})}),document.getElementById("root")),o()},31:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(5),c=(a(2),a(64)),r=a.n(c);function i(){return Object(n.jsx)(r.a,{type:"bars",color:"black",height:667,width:375})}},37:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(68),c=a(5),r=(a(2),a(25)),i=a(38);function s(e){var t=Object(i.a)(e.data,e.fields),a=t.key,s=t.tableData;return console.log(e.reverse),Object(c.jsx)(r.c,{striped:!0,borderless:!0,small:!0,hover:!0,sortable:!1,data:{columns:a,rows:e.reverse?s:Object(n.a)(s).reverse()}})}},38:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(39);function c(e,t){var a,c=Object(n.a)(Object.keys(e[0]).filter((function(e){return e.includes("time")})));try{var r=function(){var t=a.value;e.forEach((function(e){e[t]=new Date(e[t]).toUTCString()}))};for(c.s();!(a=c.n()).done;)r()}catch(s){c.e(s)}finally{c.f()}var i=Object.keys(e[0]).filter((function(e){return!t||t.includes(e)})).map((function(e){return{label:e.split("_").join(" ").replace("Vb max daily","Battery Voltage Max (Daily)").replace("Vb min daily","Battery Voltage Min (Daily)").replace("Whc daily","Battery Wh (Daily)").replace("fault daily","Fault Daily").replace("alarm daily","Alarm Daily"),field:e}}));return{tableData:e,key:i}}},57:function(e,t,a){"use strict";(function(e){var n=a(22),c=a(5),r=a(2),i=a(69),s=a(66),l=a(67),o=a(30),u=a(10),d=a(46),j=a(123);a(124);try{d.a.initializeApp({apiKey:"AIzaSyD2K0qINs7uoG6-2whLT8Wgab_AvAhVEzI",authDomain:"sierra-leone-cec24.firebaseapp.com",projectId:"sierra-leone-cec24",storageBucket:"sierra-leone-cec24.appspot.com",messagingSenderId:"458713135578",appId:"1:458713135578:web:d5a3e153fa883269ace8e3"})}catch(h){}var b=d.a.firestore();t.a=function(){var t=Object(r.useState)([]),a=Object(n.a)(t,2),d=a[0],h=a[1],f=Object(r.useState)(-1),O=Object(n.a)(f,2),p=O[0],x=O[1],m=function(){console.log("fetching!"),j("http://localhost:4001/logfile").then((function(e){return e.json()})).then((function(t){console.log(t),h(t),e.firebaseListener&&(e.firebaseListener(),e.firebaseListener=null)})).catch((function(t){if(null==e.firebaseListener){var a=b.collection("logData").doc("data");e.firebaseListener=a.onSnapshot((function(e){h(e.data().data),console.log(e.data().timestamp.seconds),x(1e3*e.data().timestamp.seconds)}))}console.log(t)}))};return Object(r.useEffect)((function(){m(),setInterval(m,3e4)}),[!0]),Object(c.jsxs)(o.a,{basename:"/solar-metering",children:[Object(c.jsx)(l.a,{firebaseTimestamp:p}),Object(c.jsxs)(u.c,{children:[Object(c.jsx)(u.a,{path:"/full-table",children:Object(c.jsx)(s.a,{data:d})}),Object(c.jsx)(u.a,{path:"/",children:Object(c.jsx)(i.a,{data:d})})]})]})}}).call(this,a(21))},66:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(22),c=a(5),r=a(2),i=a(37),s=a(31),l=a(25);function o(e){var t=e.data,a=Object(r.useState)(!1),o=Object(n.a)(a,2),u=o[0],d=o[1];return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)("br",{}),Object(c.jsx)("div",{className:"title_component",children:Object(c.jsx)("header",{className:"App-header",children:Object(c.jsx)("h1",{className:"App-title",style:{textAlign:"center"},children:"Complete Solar Data from MSView"})})}),Object(c.jsx)("br",{}),Object(c.jsxs)("div",{style:{padding:15,overflowX:"auto"},children:[t.length>0?Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(i.a,{data:t,reverse:u})}):Object(c.jsx)(s.a,{}),Object(c.jsx)("div",{style:{textAlign:"center"},children:Object(c.jsx)(l.b,{gradient:u?"peach":"purple",onClick:function(){return d(!u)},children:"Reverse Order"})})]})]})}},67:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(22),c=a(5),r=a(2),i=a(25);function s(e){var t=e.firebaseTimestamp,a=Object(r.useState)(null),s=Object(n.a)(a,2),l=s[0],o=s[1],u=function(){fetch("http://localhost:4001/last-write").then((function(e){return e.json()})).then((function(e){console.log("Last Write: ".concat(e.lastWrite)),o(e.lastWrite)})).catch((function(e){console.log(e)}))};Object(r.useEffect)((function(){u(),setInterval(u,3e4)}),[!0]);var d=function(e){var t=(new Date-e)/36e5;return{hours:Math.floor(t%24),days:Math.floor(t/24),recent:t<1,hoursFixed:(t%24).toFixed(2)}}(-1!=l&&null!=l?l:t);return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("nav",{children:Object(c.jsxs)(i.g,{color:"gray",expand:"md",fixed:"top",scrolling:!0,style:{backgroundColor:"white"},children:[Object(c.jsx)(i.h,{children:Object(c.jsx)("strong",{className:"black-text",children:"Solar Metering"})}),Object(c.jsx)(i.f,{to:"/home",children:"Graphs"}),Object(c.jsx)(i.f,{to:"/full-table",children:"Full Table"}),Object(c.jsx)("div",{className:"ml-auto",children:null!=l?-1==l?"No uploads have happened yet":d.recent?"An upload recently took place":"Last upload was ".concat(d.hours," hours and ").concat(d.days," days ago"):-1!=t?"Logs are from ".concat(d.hoursFixed," hours and ").concat(d.days," days ago"):""})]})}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{})]})}},69:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n=a(5),c=a(37),r=a(31),i=a(22),s=a(39),l=a(2),o=a(38),u=a(65),d=a.n(u);function j(e){var t,a=Object(o.a)(e.data).tableData,c=function(){var e=Object(l.useState)({width:void 0,height:void 0}),t=Object(i.a)(e,2),a=t[0],n=t[1];return Object(l.useEffect)((function(){function e(){n({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),a}(),r=[],u=Object(s.a)(e.categories);try{for(u.s();!(t=u.n()).done;){var j=t.value,h=b(j,a),f=h.x,O=h.y;r.push({x:f,y:O,name:j,type:"scatter",mode:"lines+markers",marker:{color:j.includes("max")?"red":"black"}})}}catch(p){u.e(p)}finally{u.f()}return Object(n.jsx)(d.a,{data:r,layout:{width:c.width-20,height:500,title:e.title,xaxis:{title:"Time"},yaxis:{title:e.yTitle}},config:{responsive:!0}})}function b(e,t){return{x:t.map((function(e){return new Date(e["time (UTC)"])})),y:t.map((function(t){return Number(t[e.split(" ").join("_")])}))}}function h(e){var t=e.data;return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)("br",{}),Object(n.jsx)("div",{className:"title_component",children:Object(n.jsx)("header",{className:"App-header",children:Object(n.jsx)("h1",{className:"App-title",style:{textAlign:"center"},children:"Real-Time Solar Output"})})}),t.length>0?Object(n.jsx)(j,{data:t,categories:["Vb min daily","Vb max daily"],title:"Vb Over Time",yTitle:"Vb Value (unit goes here)"}):Object(n.jsx)(r.a,{}),t.length>0?Object(n.jsx)(j,{data:t,categories:["Whc daily"],title:"Whc Value",yTitle:"Whc Value (unit goes here)"}):Object(n.jsx)(r.a,{}),Object(n.jsx)("div",{style:{padding:15,overflowX:"auto"},children:t.length>0?Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(c.a,{data:t,fields:["time (UTC)","Vb_max_daily","Vb_min_daily","Whc_daily","alarm_daily"]})}):Object(n.jsx)(r.a,{})})]})}},75:function(e,t,a){}},[[125,1,2]]]);
//# sourceMappingURL=main.b1953f10.chunk.js.map